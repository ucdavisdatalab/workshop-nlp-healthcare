<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Exploratory data analysis | NLP for Healthcare</title>
  <meta name="description" content="4 Exploratory data analysis | NLP for Healthcare" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Exploratory data analysis | NLP for Healthcare" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://ucdavisdatalab.github.io/workshop-nlp-healthcare" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Exploratory data analysis | NLP for Healthcare" />
  
  
  

<meta name="author" content="Dr. Pamela Reynolds" />
<meta name="author" content="Dr. Wesley Brooks" />
<meta name="author" content="Arthur Koehl" />


<meta name="date" content="2021-02-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="working-with-text-data-in-r.html"/>

<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://datalab.ucdavis.edu/">
<img src="img/datalab-logo-full-color-rgb.png" style="height: 100%; width: 100%; object-fit: contain" />
</a></li>
<li><a href="./" style="font-size: 18px">Workshop NLP for Healthcare</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Overview</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#objectives-for-this-workshop"><i class="fa fa-check"></i><b>1.1</b> Objectives for this Workshop</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#demo-introduction"><i class="fa fa-check"></i><b>1.2</b> Demo introduction</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#about-the-data"><i class="fa fa-check"></i><b>1.2.1</b> About the data</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#why-r-what-is-rstudio"><i class="fa fa-check"></i><b>1.2.2</b> Why R? What is RStudio?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro-to-text-processing-and-nlp-for-health-data.html"><a href="intro-to-text-processing-and-nlp-for-health-data.html"><i class="fa fa-check"></i><b>2</b> Intro to Text Processing and NLP for Health Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro-to-text-processing-and-nlp-for-health-data.html"><a href="intro-to-text-processing-and-nlp-for-health-data.html#general-methods-for-analyzing-text"><i class="fa fa-check"></i><b>2.1</b> General Methods for Analyzing Text</a></li>
<li class="chapter" data-level="2.2" data-path="intro-to-text-processing-and-nlp-for-health-data.html"><a href="intro-to-text-processing-and-nlp-for-health-data.html#nlp"><i class="fa fa-check"></i><b>2.2</b> NLP</a></li>
<li class="chapter" data-level="2.3" data-path="intro-to-text-processing-and-nlp-for-health-data.html"><a href="intro-to-text-processing-and-nlp-for-health-data.html#whats-a-natural-language"><i class="fa fa-check"></i><b>2.3</b> What’s a Natural Language?</a></li>
<li class="chapter" data-level="2.4" data-path="intro-to-text-processing-and-nlp-for-health-data.html"><a href="intro-to-text-processing-and-nlp-for-health-data.html#nlp-trends"><i class="fa fa-check"></i><b>2.4</b> NLP Trends</a></li>
<li class="chapter" data-level="2.5" data-path="intro-to-text-processing-and-nlp-for-health-data.html"><a href="intro-to-text-processing-and-nlp-for-health-data.html#caveats-before-we-get-started"><i class="fa fa-check"></i><b>2.5</b> Caveats before we get started</a></li>
<li class="chapter" data-level="2.6" data-path="intro-to-text-processing-and-nlp-for-health-data.html"><a href="intro-to-text-processing-and-nlp-for-health-data.html#further-resources"><i class="fa fa-check"></i><b>2.6</b> Further resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html"><i class="fa fa-check"></i><b>3</b> Working with Text Data in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html#setup"><i class="fa fa-check"></i><b>3.1</b> Setup</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html#packages"><i class="fa fa-check"></i><b>3.1.1</b> Packages</a></li>
<li class="chapter" data-level="3.1.2" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html#data-for-this-workshop"><i class="fa fa-check"></i><b>3.1.2</b> Data for this workshop</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html#preprocessing"><i class="fa fa-check"></i><b>3.2</b> Preprocessing</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html#load-the-text-column-into-a-corpus-object"><i class="fa fa-check"></i><b>3.2.1</b> Load the text column into a ‘corpus’ object</a></li>
<li class="chapter" data-level="3.2.2" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html#preprocess-the-corpus-object"><i class="fa fa-check"></i><b>3.2.2</b> Preprocess the corpus object</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html#the-bag-of-words-representation"><i class="fa fa-check"></i><b>3.3</b> The Bag of Words Representation</a></li>
<li class="chapter" data-level="3.4" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html#the-document-term-matrix"><i class="fa fa-check"></i><b>3.4</b> The Document Term Matrix</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html#creating-a-document-term-matrix-from-the-corpus-object"><i class="fa fa-check"></i><b>3.4.1</b> Creating a Document Term Matrix from the corpus object</a></li>
<li class="chapter" data-level="3.4.2" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html#exploring-with-a-dtm"><i class="fa fa-check"></i><b>3.4.2</b> Exploring with a DTM</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html#tf-idf"><i class="fa fa-check"></i><b>3.5</b> TF-IDF</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html#intuition-behind-tf-idf"><i class="fa fa-check"></i><b>3.5.1</b> Intuition behind TF-IDF</a></li>
<li class="chapter" data-level="3.5.2" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html#tf-idf-formula"><i class="fa fa-check"></i><b>3.5.2</b> TF-IDF formula</a></li>
<li class="chapter" data-level="3.5.3" data-path="working-with-text-data-in-r.html"><a href="working-with-text-data-in-r.html#tf-idf-from-dtm"><i class="fa fa-check"></i><b>3.5.3</b> TF-IDF from DTM</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>4</b> Exploratory data analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#principal-components-analysis"><i class="fa fa-check"></i><b>4.1</b> Principal components analysis</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#check-the-tf-idf-matrix"><i class="fa fa-check"></i><b>4.1.1</b> Check the TF-IDF matrix</a></li>
<li class="chapter" data-level="4.1.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#compute-pca"><i class="fa fa-check"></i><b>4.1.2</b> Compute PCA</a></li>
<li class="chapter" data-level="4.1.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#plot-the-abstracts"><i class="fa fa-check"></i><b>4.1.3</b> Plot the abstracts</a></li>
<li class="chapter" data-level="4.1.4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#examine-how-principal-components-sort-the-documents"><i class="fa fa-check"></i><b>4.1.4</b> Examine how principal components sort the documents</a></li>
<li class="chapter" data-level="4.1.5" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#interpreting-pca"><i class="fa fa-check"></i><b>4.1.5</b> Interpreting PCA</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NLP for Healthcare</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="exploratory-data-analysis" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Exploratory data analysis</h1>
<p>Having now imported the data as a TF-IDF matrix, we aree able to begin with some exploratory data analysis. The analysis can help us to understand patterns in the big stack of abstracts about breast cancer. It won’t tell us much about any particular one of the abstracts - remember that we’ve reduced each one to a vector of term frequencies so as a text document each abstract has been stripped of meaning. But we are going to be able to identify large-scale patterns in the collection of abstracts much more quickly than if we had to read each one.</p>
<div id="principal-components-analysis" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Principal components analysis</h2>
<p>Principal components analysis, which will be abbreviated PCA, is a method used in exploratory data analysis for multidimensional data. That’s what we’re working with, since the 8180 columns of the TF-IDF matrix are more than we could possibly explore on a column-by-column basis.</p>
<div id="check-the-tf-idf-matrix" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Check the TF-IDF matrix</h3>
<p>Not only are there too many columns to work through individually, but also each column is mostly zeroes. As a result an individual column of the TF-IDF matrix doesn’t contain much information. This makes sense if you consider consider how much you would learn about books published in 2020 by counting the number of times each one used ther word “whale”. Here’s an example.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="exploratory-data-analysis.html#cb29-1" aria-hidden="true"></a><span class="co"># first, convert the TF-IDF to a dense matrix</span></span>
<span id="cb29-2"><a href="exploratory-data-analysis.html#cb29-2" aria-hidden="true"></a>tfmat =<span class="st"> </span><span class="kw">as.matrix</span>( tfidf_dtm )</span>
<span id="cb29-3"><a href="exploratory-data-analysis.html#cb29-3" aria-hidden="true"></a></span>
<span id="cb29-4"><a href="exploratory-data-analysis.html#cb29-4" aria-hidden="true"></a><span class="co"># identify the first term and plot its histogram</span></span>
<span id="cb29-5"><a href="exploratory-data-analysis.html#cb29-5" aria-hidden="true"></a><span class="kw">hist</span>( tfmat[, <span class="dv">1</span>], <span class="dt">main=</span><span class="kw">paste0</span>( <span class="st">&#39;uses of &quot;&#39;</span>, <span class="kw">colnames</span>( tfmat )[[<span class="dv">1</span>]], <span class="st">&#39;&quot;&#39;</span> ))</span></code></pre></div>
<p><img src="03_pca_files/figure-html/plot-tfidf-1.png" width="672" /></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="exploratory-data-analysis.html#cb30-1" aria-hidden="true"></a><span class="co"># identify the second term and plot its histgram</span></span>
<span id="cb30-2"><a href="exploratory-data-analysis.html#cb30-2" aria-hidden="true"></a><span class="kw">hist</span>( tfmat[, <span class="dv">2</span>], <span class="dt">main=</span><span class="kw">paste0</span>( <span class="st">&#39;uses of &quot;&#39;</span>, <span class="kw">colnames</span>( tfmat )[[<span class="dv">2</span>]], <span class="st">&#39;&quot;&#39;</span> ))</span></code></pre></div>
<p><img src="03_pca_files/figure-html/plot-tfidf-2.png" width="672" /></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="exploratory-data-analysis.html#cb31-1" aria-hidden="true"></a><span class="co"># plot the first two columns </span></span>
<span id="cb31-2"><a href="exploratory-data-analysis.html#cb31-2" aria-hidden="true"></a><span class="kw">plot</span>( <span class="kw">as.matrix</span>(tfidf_dtm[, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]), <span class="dt">bty=</span><span class="st">&#39;n&#39;</span>, <span class="dt">main=</span><span class="kw">paste0</span>( <span class="st">&#39;joint uses of &quot;&#39;</span>,</span>
<span id="cb31-3"><a href="exploratory-data-analysis.html#cb31-3" aria-hidden="true"></a>  <span class="kw">colnames</span>( tfmat )[[<span class="dv">1</span>]], <span class="st">&#39;&quot; and &quot;&#39;</span>, <span class="kw">colnames</span>( tfmat )[[<span class="dv">2</span>]], <span class="st">&#39;&quot;&#39;</span>) )</span></code></pre></div>
<p><img src="03_pca_files/figure-html/plot-tfidf-3.png" width="672" /></p>
</div>
<div id="compute-pca" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Compute PCA</h3>
<p>Since the individual columns don’t convey much information, PCA rotates the big matrix until we are “looking” down the “direction” (or component) with the most variability. The result is another matrix of equal size to the first, but each column contains information from all of the columns of the original matrix, and they are sorted so that the columns with the most variability are first. This will take your computer several seconds to calculate.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="exploratory-data-analysis.html#cb32-1" aria-hidden="true"></a><span class="co"># rotate the TF-IDF so the columns are articles</span></span>
<span id="cb32-2"><a href="exploratory-data-analysis.html#cb32-2" aria-hidden="true"></a>articles =<span class="st"> </span><span class="kw">t</span>( tfmat )</span>
<span id="cb32-3"><a href="exploratory-data-analysis.html#cb32-3" aria-hidden="true"></a></span>
<span id="cb32-4"><a href="exploratory-data-analysis.html#cb32-4" aria-hidden="true"></a><span class="co"># calculate PCA on the rotated TF-IDF</span></span>
<span id="cb32-5"><a href="exploratory-data-analysis.html#cb32-5" aria-hidden="true"></a>pca =<span class="st"> </span><span class="kw">prcomp</span>(articles, <span class="dt">center=</span><span class="ot">TRUE</span>, <span class="dt">scale=</span><span class="ot">TRUE</span>)</span>
<span id="cb32-6"><a href="exploratory-data-analysis.html#cb32-6" aria-hidden="true"></a></span>
<span id="cb32-7"><a href="exploratory-data-analysis.html#cb32-7" aria-hidden="true"></a><span class="co"># extract the matrix of rotations</span></span>
<span id="cb32-8"><a href="exploratory-data-analysis.html#cb32-8" aria-hidden="true"></a>pcmat =<span class="st"> </span><span class="kw">as.data.frame</span>( pca<span class="op">$</span>rotation )</span></code></pre></div>
</div>
<div id="plot-the-abstracts" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Plot the abstracts</h3>
<p>We can now look at a plot of the first two principal components to see how it contains more information than the first columns of the TF-IDF matrix.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="exploratory-data-analysis.html#cb33-1" aria-hidden="true"></a><span class="co"># plot the first two principal components</span></span>
<span id="cb33-2"><a href="exploratory-data-analysis.html#cb33-2" aria-hidden="true"></a><span class="kw">with</span>( pcmat, <span class="kw">plot</span>(PC1, PC2) )</span></code></pre></div>
<p><img src="03_pca_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>Unlike the TF-IDF, the x and y axes here have no inherent meaning, but they are aligned with the greatest variability in the data. So by inspecting the articles that are at the extremes, we can begin to understand the strongest signals that PCA detected in the articles.</p>
</div>
<div id="examine-how-principal-components-sort-the-documents" class="section level3" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> Examine how principal components sort the documents</h3>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="exploratory-data-analysis.html#cb34-1" aria-hidden="true"></a><span class="co"># identify the order of documents along the first principal component</span></span>
<span id="cb34-2"><a href="exploratory-data-analysis.html#cb34-2" aria-hidden="true"></a>indx &lt;-<span class="st"> </span><span class="kw">order</span>( pcmat<span class="op">$</span>PC1 )</span>
<span id="cb34-3"><a href="exploratory-data-analysis.html#cb34-3" aria-hidden="true"></a></span>
<span id="cb34-4"><a href="exploratory-data-analysis.html#cb34-4" aria-hidden="true"></a><span class="co"># view the titles at the extremes of the first principal component</span></span>
<span id="cb34-5"><a href="exploratory-data-analysis.html#cb34-5" aria-hidden="true"></a>data<span class="op">$</span>title[ <span class="kw">head</span>(indx) ]</span></code></pre></div>
<pre><code>## [1] &quot;Signal transduction pathways regulated by CSF-1 receptors modulate the in vitro radiosensitivity of mammary epithelial cells.&quot;                                                                                                                           
## [2] &quot;Creation of an episode-based payment model for prostate and breast cancer radiation therapy.&quot;                                                                                                                                                            
## [3] &quot;Erratum to: Wang SY, Kelly G, Gross C, et al. Information needs of older women with early-stage breast cancer when making radiation therapy decisions. [Int J Radiat Oncol Biol Phys 2017;98:733-740](S0360301617303097)(10.1016/j.ijrobp.2017.02.001)).&quot;
## [4] &quot;Molecular radiation therapy in experimental model of advanced prostate cancer using internalizable monoclonal antibody.&quot;                                                                                                                                 
## [5] &quot;Dna double-strand break repair and induction of apoptosis in relation to late normal tissue responses following radiation therapy for early breast cancer.&quot;                                                                                              
## [6] &quot;Patient experience survey of early-stage breast cancer patients undergoing whole-breast radiation therapy.&quot;</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="exploratory-data-analysis.html#cb36-1" aria-hidden="true"></a>data<span class="op">$</span>title[ <span class="kw">tail</span>(indx) ]</span></code></pre></div>
<pre><code>## [1] &quot;Phase I/II Study Evaluating Early Tolerance in Breast Cancer Patients Undergoing Accelerated Partial Breast Irradiation Treated With the MammoSite Balloon Breast Brachytherapy Catheter Using a 2-Day Dose Schedule.&quot;                          
## [2] &quot;Accelerated partial breast irradiation using sole interstitial multicatheter brachytherapy versus whole breast irradiation for early breast cancer: Five-year results of a randomized phase 3 trial-Part I: Local control and survival results.&quot;
## [3] &quot;Accelerated partial-breast irradiation provides equivalent 10-year outcomes to whole breast irradiation: A matched-pair analysis.&quot;                                                                                                              
## [4] &quot;Daily Fractionation of External Beam Accelerated Partial Breast Irradiation to 40 Gy Is Well Tolerated and Locally Effective.&quot;                                                                                                                  
## [5] &quot;Margin status an indication for accelerated partial breast irradiation in early-stage breast cancers.&quot;                                                                                                                                          
## [6] &quot;Differences in Patterns of Failure in Patients Treated With Accelerated Partial Breast Irradiation Versus Whole-Breast Irradiation: A Matched-Pair Analysis With 10-Year Follow-Up.&quot;</code></pre>
<p>It seems that the PCA has detected a pattern in term usage that distinguishes between papers on one extreme that make comparisons between whole- and partial-breast radiation therapy, and papers on the other extreme that are mostly about molecular biology. This is kind of impressive when you consider that the computer did it without any human input about what language might be relevant to medicine or biology. Let’s look at how some other principal components are separating the documents.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="exploratory-data-analysis.html#cb38-1" aria-hidden="true"></a><span class="co"># identify the order of documents along the second principal component</span></span>
<span id="cb38-2"><a href="exploratory-data-analysis.html#cb38-2" aria-hidden="true"></a>indx =<span class="st"> </span><span class="kw">order</span>( pcmat<span class="op">$</span>PC2 )</span>
<span id="cb38-3"><a href="exploratory-data-analysis.html#cb38-3" aria-hidden="true"></a></span>
<span id="cb38-4"><a href="exploratory-data-analysis.html#cb38-4" aria-hidden="true"></a><span class="co"># observe which papers are at the extremes of the second PC</span></span>
<span id="cb38-5"><a href="exploratory-data-analysis.html#cb38-5" aria-hidden="true"></a>data<span class="op">$</span>title[ <span class="kw">head</span>(indx) ]</span></code></pre></div>
<pre><code>## [1] &quot;The influence of young age on outcome in early stage breast cancer.&quot;                                                                                                      
## [2] &quot;Locoregional failure in early-stage breast cancer patients treated with breast-conserving therapy: Which patients benefit from supraclavicular nodal irradiation?&quot;        
## [3] &quot;Breast conservation treatment of early stage breast cancer: Patterns of failure.&quot;                                                                                         
## [4] &quot;Equivalent survival with breast conservation therapy or mastectomy in the management of youngwomen with early-stage breast cancer.&quot;                                       
## [5] &quot;Delivering adjuvant radiation therapy beyond 6 months after breast-conserving surgery does not jeopardize the locoregional control in early-stage breast cancer patients.&quot;
## [6] &quot;Profile of prognostic factors in 1022 Indian women with early-stage breast cancer treated with breast-conserving therapy.&quot;</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="exploratory-data-analysis.html#cb40-1" aria-hidden="true"></a>data<span class="op">$</span>title[ <span class="kw">tail</span>(indx) ]</span></code></pre></div>
<pre><code>## [1] &quot;Hypofractionated whole breast radiation therapy: Does size matter?&quot;                                                                                                                                    
## [2] &quot;Comparison of preoperative partial breast radiosurgery treatment techniques: 3D-CRT, non-coplanar IMRT, coplanar IMRT, and VMAT.&quot;                                                                      
## [3] &quot;A dosimetric planning study for hypofractionated whole breast irradiation with concurrent boost (RTOG 1005) for early stage breast cancer.&quot;                                                            
## [4] &quot;Prone hypofractionated whole-breast radiotherapy without a boost to the tumor bed: Comparable toxicity of IMRT versus a 3D conformal technique.&quot;                                                       
## [5] &quot;Ongoing clinical experience utilizing 3D conformal external beam radiotherapy to deliver partial-breast irradiation in patients with early-stage breast cancer treated with breast-conserving therapy.&quot;
## [6] &quot;Prone accelerated partial breast irradiation after breast-conserving surgery: Preliminary clinical results and dose-volume histogram analysis.&quot;</code></pre>
<p>With the second principal component, we see a separation between papers about breast-conserving therapy at one extreme and papers about hypofractionated, conformal, or modulated radiation therapy at the other extreme.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="exploratory-data-analysis.html#cb42-1" aria-hidden="true"></a><span class="co"># identify the order of documents along the third principal component</span></span>
<span id="cb42-2"><a href="exploratory-data-analysis.html#cb42-2" aria-hidden="true"></a>indx =<span class="st"> </span><span class="kw">order</span>( pcmat<span class="op">$</span>PC3 )</span>
<span id="cb42-3"><a href="exploratory-data-analysis.html#cb42-3" aria-hidden="true"></a></span>
<span id="cb42-4"><a href="exploratory-data-analysis.html#cb42-4" aria-hidden="true"></a><span class="co"># observe which papers are at the extremes of the second PC</span></span>
<span id="cb42-5"><a href="exploratory-data-analysis.html#cb42-5" aria-hidden="true"></a>data<span class="op">$</span>title[ <span class="kw">head</span>(indx) ]</span></code></pre></div>
<pre><code>## [1] &quot;External beam radiation therapy versus intraoperative radiation therapy for breast-conserving therapy: A large single-institution matched-pair evaluation.&quot;           
## [2] &quot;Early results of a prospective cohort study on intraoperative radiation therapy for early breast cancer at a single institution.&quot;                                     
## [3] &quot;Cosmetic outcome and late breast toxicity after intraoperative radiation therapy as a single modality or as a boost using the intrabeam® device: A prospective study.&quot;
## [4] &quot;Updated results of a prospective cohort study on intraoperative radiation therapy for early breast cancer at a single-institution.&quot;                                   
## [5] &quot;First safety analysis after 80 treated patients with early breast cancer within the targit-e trial.&quot;                                                                  
## [6] &quot;A comparison of the early toxicities of balloon catheter high-dose-rate brachytherapy (BCHDRB) and intraoperative radiation therapy.&quot;</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="exploratory-data-analysis.html#cb44-1" aria-hidden="true"></a>data<span class="op">$</span>title[ <span class="kw">tail</span>(indx) ]</span></code></pre></div>
<pre><code>## [1] &quot;Dosimetric comparison of radiotherapy for left sided breast cancer: Breath-hold versus free breathing.&quot;                                                                                                 
## [2] &quot;Is there justification for the utilization of IMRT in the treatment of early-stage right breast cancer?&quot;                                                                                                
## [3] &quot;Bilateral breast and regional nodal irradiation in early stage breast cancer D a dosimetric comparison of IMRT and 3D conformal radiation therapy.&quot;                                                     
## [4] &quot;Small arc volumetric modulated arc therapy: A new approach superior to IMRT in optimizing dosimetric and treatment relevant parameters for patients following breast conservative surgery.&quot;             
## [5] &quot;Comparison of different radiation techniques to achieve normal tissue sparing and target volume coverage in the treatment of left-sided early stage breast cancer.&quot;                                     
## [6] &quot;Planning comparison of intensity modulated radiation therapy delivered with 2 tangential fields versus 3-dimensional conformal radiotherapy for cardiac sparing in women with left-sided breast cancer.&quot;</code></pre>
<p>At one extreme of the third principal component are articles about intraoperative radiation therapy and at the other extreme are articles about radiation dosimetry, especially with respect to modulated and conformal radiation therapy.</p>
</div>
<div id="interpreting-pca" class="section level3" number="4.1.5">
<h3><span class="header-section-number">4.1.5</span> Interpreting PCA</h3>
<p>It looks like there are patterns of actual meaning arising from the PCA. We’re not talking here about statistical significance or clinical importance. It is still for humans to decide what patterns have clinical importance. Here, PCA is a shortcut that allows us to identify some patterns in articles about breast cancer radiation therapy without having to read all of the articles. All of the patterns I’ve cited are based on patterns of word usage, and yet it appears that those patterns in word usage actually map onto distinctions with real-world meaning. So keep in mind that the principal components are only identifying patterns in term frequencies but the PCA is useful only when those terms map onto real-world meaning.</p>
<p>So far, we’ve looked at the most extreme documents along some principal components. If you want to see more than a few documents at a time, or see how documents align jointly on two principal components, then you want to do a scatterplot of the top terms of each document. I’ll show you how, but it uses a function called <code>top_terms()</code> that needs to be loaded from our Github repository (it’s too complex to live-code).</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="exploratory-data-analysis.html#cb46-1" aria-hidden="true"></a><span class="co"># load the function for identifying top terms in documents</span></span>
<span id="cb46-2"><a href="exploratory-data-analysis.html#cb46-2" aria-hidden="true"></a><span class="kw">source</span>(<span class="kw">url</span>(<span class="st">&quot;https://ucdavisdatalab.github.io/workshop-nlp-healthcare/top_terms.R&quot;</span>))</span>
<span id="cb46-3"><a href="exploratory-data-analysis.html#cb46-3" aria-hidden="true"></a></span>
<span id="cb46-4"><a href="exploratory-data-analysis.html#cb46-4" aria-hidden="true"></a><span class="co"># cbind data and the PCA rotation</span></span>
<span id="cb46-5"><a href="exploratory-data-analysis.html#cb46-5" aria-hidden="true"></a>plotdata &lt;-<span class="st"> </span><span class="kw">cbind</span>(data, pcmat)</span>
<span id="cb46-6"><a href="exploratory-data-analysis.html#cb46-6" aria-hidden="true"></a></span>
<span id="cb46-7"><a href="exploratory-data-analysis.html#cb46-7" aria-hidden="true"></a><span class="co"># identify top terms for each document and attach them to the plotdata</span></span>
<span id="cb46-8"><a href="exploratory-data-analysis.html#cb46-8" aria-hidden="true"></a>plotdata[[ <span class="st">&#39;top_terms&#39;</span> ]] &lt;-<span class="st"> </span><span class="kw">top_terms</span>( tfidf_dtm )</span>
<span id="cb46-9"><a href="exploratory-data-analysis.html#cb46-9" aria-hidden="true"></a></span>
<span id="cb46-10"><a href="exploratory-data-analysis.html#cb46-10" aria-hidden="true"></a><span class="co"># visualize the top principal components in terms of top terms</span></span>
<span id="cb46-11"><a href="exploratory-data-analysis.html#cb46-11" aria-hidden="true"></a><span class="kw">ggplot</span>(plotdata) <span class="op">+</span><span class="st"> </span><span class="kw">aes</span>(<span class="dt">x=</span>PC2, <span class="dt">y=</span>PC3, <span class="dt">label=</span>top_terms) <span class="op">+</span><span class="st"> </span><span class="kw">geom_text</span>(<span class="dt">check_overlap=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="03_pca_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>We’ve seen the patterns that align with the first, second, and third principal components. What makes these principal components the first, second, and third? The PCs are ranked by the amount of total variance in the TF-IDF matrix that they explain. So the first principal component is aligned with the strongest signal in term frequency, and the second is aligned with the strongest signal that’s left over after accounting for the first component, and so on. The strength of signal is quantified by the proportion of variance in the TF-IDF matrix that is explained by each principal component. In order to see how the strength of signal changes along the sequence of PCs, we can visualize the cumulative percent of variance explained.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="exploratory-data-analysis.html#cb47-1" aria-hidden="true"></a><span class="kw">plot</span>(<span class="dv">100</span> <span class="op">*</span><span class="st"> </span><span class="kw">cumsum</span>(pca<span class="op">$</span>sdev<span class="op">^</span><span class="dv">2</span>) <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(pca<span class="op">$</span>sdev<span class="op">^</span><span class="dv">2</span>), <span class="dt">type=</span><span class="st">&#39;l&#39;</span>, <span class="dt">bty=</span><span class="st">&#39;n&#39;</span>,</span>
<span id="cb47-2"><a href="exploratory-data-analysis.html#cb47-2" aria-hidden="true"></a>    <span class="dt">ylab=</span><span class="st">&quot;% total variance explained&quot;</span>, <span class="dt">xlab=</span><span class="st">&quot;Number of components&quot;</span>)</span></code></pre></div>
<p><img src="03_pca_files/figure-html/plot-variance-explained-1.png" width="672" /></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="working-with-text-data-in-r.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ucdavisdatalab/workshop-nlp-healthcare/edit/main/03_pca.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ucdavisdatalab/workshop-nlp-healthcare/blob/main/03_pca.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
